(function(b,a){a.methods={};a.map={ids:[],spans:{},slugs:{},posts:{}};a.methods.checkResponse=function(c){return typeof c.success!=="undefined"&&c.success&&typeof c.data==="object"};a.methods.onError=function(){b(a.map.ids).each(function(d,c){b("#"+c).remove()});b(document).trigger("ajax_template_part_error",a.map);b(document).trigger("ajax_template_part_done")};a.methods.onSuccess=function(c){b.each(a.map.ids,function(f,e){var d=b("#"+e);if(d.length&&typeof c[e]==="string"){d.replaceWith(c[e]).show()}else{d.remove()}});b(document).trigger("ajax_template_part_success",a.map);b(document).trigger("ajax_template_part_done")};a.methods.callAjax=function(){return b.ajax({url:a.info.ajax_url,dataType:"json",type:"POST",data:{action:"ajaxtemplatepart",query_data:a.info.query_data,files_data:a.map.slugs,posts_data:a.map.posts}})};a.methods.parseDom=function(){b("span[data-ajaxtemplate]").each(function(j,f){var l=b(f);var e=l.attr("id");var c=decodeURIComponent(l.data("ajaxtemplate").replace(/\+/g," "));var g=b.parseJSON(c);var d=g.name;var h=g.slug;var k=l.data("post");if(typeof e==="string"&&e!==""&&typeof d==="string"&&d!==""){if(typeof h!=="string"){h=false}if(Number(k)<=0){k=false}a.map.ids.push(e);a.map.spans[e]=l;a.map.slugs[e]=[d,h];a.map.posts[e]=k}l.data("ajaxtemplate",null)})};a.methods.update=function(){if(a.map.ids.length<1){return false}a.methods.callAjax().done(function(c){if(a.methods.checkResponse(c)){a.methods.onSuccess(c.data)}else{a.methods.onError()}}).fail(function(){a.methods.onError()})};b(document).ready(function(){a.methods.parseDom();a.methods.update()});b(document).on("ajax_template_part_done",function(){a.map={ids:[],spans:{},slugs:{},posts:{}}})})(jQuery,AjaxTemplatePartData);